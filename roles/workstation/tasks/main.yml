---
- name: 'Load variables based on the OS family'
  include_vars: '{{ item }}'
  with_first_found:
    - '{{ ansible_distribution | lower }}.yml'
    - '{{ ansible_os_family | lower }}.yml'
    - 'default.yml'

- name: 'Include tasks based on the OS family'
  include_tasks: '{{ ansible_os_family | lower }}.yml'
