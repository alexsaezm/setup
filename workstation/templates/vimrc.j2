if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin('~/.vim/bundle')

  Plug 'tpope/vim-sensible'
  Plug 'dkarter/bullets.vim'
	Plug 'dracula/vim'
  Plug 'luochen1990/rainbow'

call plug#end()

set nocompatible                                " Enable vim features
set encoding=utf-8                              " UTF-8 support
set shiftwidth=2
set tabstop=2
set expandtab
set laststatus=2
set cursorline                                  " Highlight current line
set guifont=Monaco:h14                          " Set Monaco with size 14 as font
set guioptions-=r                               " Remove right-hand scroll bar
set guioptions-=L                               " Remove left-hand scroll bar
set number relativenumber                       " Turn hybrid line numbers on
set number                                      " Show line numbers
set modeline
set modelines=2                                 " Load config options in the files (modelines)
set clipboard+=unnamedplus                      " Use linux clipboard
set ignorecase                                  " Case insensitive searching
set smartcase                                   " Case-sensitive if expresson contains a capital letter
set incsearch                                   " Set incremental search, like modern browsers
set nolazyredraw                                " Don't redraw while executing macros
set smartindent

" ----------------- Status line ---------------------------------------------
set statusline=                                 " clear the statusline for when vimrc is reloaded
set statusline+=%-3.3n\                         " buffer number
set statusline+=%f\                             " file name
set statusline+=%h%m%r%w                        " flags
set statusline+=[%{strlen(&ft)?&ft:'none'},     " filetype
set statusline+=%{strlen(&fenc)?&fenc:&enc},    " encoding
set statusline+=%{&fileformat}]                 " file format
set statusline+=%=                              " right align
set statusline+=%{synIDattr(synID(line('.'),col('.'),1),'name')}\
set statusline+=%b,0x%-8B\                      " current char
set statusline+=%-14.(%l,%c%V%)\ %<%P           " offset

" ----------------- Backup section ------------------------------------------
" It moves the vim backups to /tmp instead of the current folder
set backup
set backupdir=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
set backupskip=/tmp/*,/private/tmp/*
set directory=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
set writebackup

filetype plugin indent on                       " Load filetype-specific indent files
set background=dark
color dracula                                   " https://draculatheme.com/vim
let g:airline_theme='dracula'
let g:rainbow_active=1
syntax on

" Buffers trick
nnoremap <C-e> :set nomore <Bar> :ls <Bar> :set more <CR>:b<Space>

" ----------------- Movement section ----------------------------------------
" unset the arrows to avoid using an inpure workflow :)
noremap <Up> <Nop>
noremap <Down> <Nop>
noremap <Left> <Nop>
noremap <Right> <Nop>

set path+=./**
" Type jj quickly to esc
inoremap jj <Esc>

" ----------------- Markdown section ----------------------------------------
autocmd BufRead,BufNewFile *.md setlocal spell spelllang=es
autocmd BufRead,BufNewFile *.md setlocal tw=79
autocmd BufRead,BufNewFile *.md hi link Task DraculaGreen
autocmd BufRead,BufNewFile *.md hi link Bug DraculaYellow
autocmd BufRead,BufNewFile *.md syn keyword Task TODO
autocmd BufRead,BufNewFile *.md syn keyword Bug FIXME
